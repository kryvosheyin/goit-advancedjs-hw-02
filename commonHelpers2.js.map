{"version":3,"file":"commonHelpers2.js","sources":["../src/js/02-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport iziToast from 'izitoast';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst selectors = {\n  dateField: document.getElementById('datetime-picker'),\n  startButton: document.querySelector('[data-start]'),\n  timeValues: document.querySelectorAll('.value'),\n  days: document.querySelector('[data-days]'),\n  hours: document.querySelector('[data-hours]'),\n  minutes: document.querySelector('[data-minutes]'),\n  seconds: document.querySelector('[data-seconds]'),\n};\n\nselectors.startButton.disabled = true;\nlet selectedDate;\nlet timer;\nconst currentDate = () => new Date();\n\nflatpickr(selectors.dateField, {\n  enableTime: true,\n  dateFormat: 'Y-m-d H:i',\n  onChange: selectedDates => {\n    selectedDate = selectedDates[0];\n    if (selectedDate) {\n      if (selectedDate < currentDate()) {\n        iziToast.show({\n          timeout: 1500,\n          close: false,\n          class: 'toast',\n          title: 'Please select the date in the future',\n          titleColor: 'white',\n          backgroundColor: 'red',\n          position: 'topCenter',\n        });\n        resetTimer(timer);\n      } else {\n        selectors.startButton.disabled = false;\n      }\n    }\n  },\n});\n\nselectors.startButton.addEventListener('click', event => {\n  if (selectedDate) {\n    clearInterval(timer);\n    timer = setInterval(() => {\n      const timeDifference = selectedDate - currentDate();\n      if (timeDifference < 1000) {\n        resetTimer(timer);\n      }\n      displayTimeLeft(timeDifference);\n    }, 1000);\n  }\n});\n\nconst displayTimeLeft = time => {\n  const days = Math.floor(time / 86400000);\n  const hours = Math.floor((time % 86400000) / 3600000);\n  const minutes = Math.floor((time % 3600000) / 60000);\n  const seconds = Math.floor((time % 60000) / 1000);\n\n  selectors.days.textContent = days.toString().padStart(2, '0');\n  selectors.hours.textContent = hours.toString().padStart(2, '0');\n  selectors.minutes.textContent = minutes.toString().padStart(2, '0');\n  selectors.seconds.textContent = seconds.toString().padStart(2, '0');\n};\n\nconst showError = message => {\n  const errorElement = document.createElement('div');\n  errorElement.textContent = message;\n  errorElement.className = 'error-message';\n  document.body.appendChild(errorElement);\n\n  setTimeout(() => {\n    document.body.removeChild(errorElement);\n  }, 2000);\n};\n\nconst resetTimer = () => {\n  clearInterval(timer);\n  selectors.timeValues.forEach(el => (el.textContent = '00'));\n  selectors.startButton.disabled = true;\n};\n"],"names":["selectors","selectedDate","timer","currentDate","flatpickr","selectedDates","iziToast","resetTimer","event","timeDifference","displayTimeLeft","time","days","hours","minutes","seconds","el"],"mappings":"+IAKA,MAAMA,EAAY,CAChB,UAAW,SAAS,eAAe,iBAAiB,EACpD,YAAa,SAAS,cAAc,cAAc,EAClD,WAAY,SAAS,iBAAiB,QAAQ,EAC9C,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,CAClD,EAEAA,EAAU,YAAY,SAAW,GACjC,IAAIC,EACAC,EACJ,MAAMC,EAAc,IAAM,IAAI,KAE9BC,EAAUJ,EAAU,UAAW,CAC7B,WAAY,GACZ,WAAY,YACZ,SAAUK,GAAiB,CACzBJ,EAAeI,EAAc,CAAC,EAC1BJ,IACEA,EAAeE,KACjBG,EAAS,KAAK,CACZ,QAAS,KACT,MAAO,GACP,MAAO,QACP,MAAO,uCACP,WAAY,QACZ,gBAAiB,MACjB,SAAU,WACpB,CAAS,EACDC,EAAgB,GAEhBP,EAAU,YAAY,SAAW,GAGtC,CACH,CAAC,EAEDA,EAAU,YAAY,iBAAiB,QAASQ,GAAS,CACnDP,IACF,cAAcC,CAAK,EACnBA,EAAQ,YAAY,IAAM,CACxB,MAAMO,EAAiBR,EAAeE,IAClCM,EAAiB,KACnBF,EAAgB,EAElBG,EAAgBD,CAAc,CAC/B,EAAE,GAAI,EAEX,CAAC,EAED,MAAMC,EAAkBC,GAAQ,CAC9B,MAAMC,EAAO,KAAK,MAAMD,EAAO,KAAQ,EACjCE,EAAQ,KAAK,MAAOF,EAAO,MAAY,IAAO,EAC9CG,EAAU,KAAK,MAAOH,EAAO,KAAW,GAAK,EAC7CI,EAAU,KAAK,MAAOJ,EAAO,IAAS,GAAI,EAEhDX,EAAU,KAAK,YAAcY,EAAK,SAAQ,EAAG,SAAS,EAAG,GAAG,EAC5DZ,EAAU,MAAM,YAAca,EAAM,SAAQ,EAAG,SAAS,EAAG,GAAG,EAC9Db,EAAU,QAAQ,YAAcc,EAAQ,SAAQ,EAAG,SAAS,EAAG,GAAG,EAClEd,EAAU,QAAQ,YAAce,EAAQ,SAAQ,EAAG,SAAS,EAAG,GAAG,CACpE,EAaMR,EAAa,IAAM,CACvB,cAAcL,CAAK,EACnBF,EAAU,WAAW,QAAQgB,GAAOA,EAAG,YAAc,IAAK,EAC1DhB,EAAU,YAAY,SAAW,EACnC"}